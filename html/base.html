{{ define "base" }}
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="utf-8" />
      <title>{{ template "title" . }} - PCBB</title>
      <script src="https://unpkg.com/alpinejs" defer></script>
    </head>

    <body>
      <header>
        <h1><a href="/">Sorties PCBB</a></h1>
      </header>

      <nav>
        <div>
          <a href="/">Accueil</a>
          <a href="/events">Événements</a>
          <a href="/guests">Participants</a>
          <a href="/status">Statuts</a>
        </div>
      </nav>

      <main>
        <h1>{{ template "title" . }}</h1>
        {{ template "main" . }}
      </main>

      <script>
        async function api(endpoint, req) {
          const headers = {
            'Accept': 'application/json',
            'Content-Type': 'application/json',
          }
          req = req || {}
          const resp = await fetch(`/api/${endpoint}`, { 
            method: 'POST',
            headers: headers,
            body: JSON.stringify(req)
          })
          return resp.json().then(json => {
            if (json.error) {
              throw new Error(json.error)
            }
            return json
          })
        }
      </script>
    </body>
  </html>
{{ end }}
